package com.twilightimperium.backend.test.java;

import org.junit.jupiter.api.Test;

import com.twilightimperium.backend.Game;
import com.twilightimperium.backend.model.game.*;

import static org.junit.jupiter.api.Assertions.assertEquals;

import java.util.*;

public class GameStateTest {

    @Test
    public void activateSystemTest(){
        Game game = new Game();
        game.addPlayer("testToken");
        game.activateSystem(2,3,"testToken");
        assertEquals(true,game.getGameState().getMap().getTile(2,3).getTokens().contains(0));
    }

    @Test
    public void moveShipsTest(){
        Game game = new Game();
        game.addPlayer("testToken");
        game.activateSystem(2,3,"testToken");
        List<Ship> testShips = new ArrayList<Ship>();
        testShips.add(new Ship(3,3,"destroyer"));
        //make sure it returns false if the ship to move doesn't exist.
        /*
        assertEquals(game.moveShips(testShips), false);
        */
        game.getGameState().getMap().addShip(3,3,"destroyer");
        assertEquals(game.move(testShips.toArray(new Ship[0])), true);
        List<Ship> systemShips = game.getGameState().getMap().getTile(2, 3).getShips();
        assertEquals("destroyer",systemShips.get(0).getShipClass());
        assertEquals(2,systemShips.get(0).getCoords().x);
        assertEquals(3,systemShips.get(0).getCoords().y);
        assertEquals(0,game.getGameState().getMap().getTile(3,3).getShips().size());
    }

    
}
